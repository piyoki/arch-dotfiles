#!/bin/sh

rofi_command="rofi -p "beats" -dmenu -theme $HOME/.config/rofi/conf/launcher.rasi"
ARGS="--volume=50 -ao=pulse"

notification() {
    notify-send "Playing Now" "\n$@" --icon=media-tape
}

menu() {
    printf "1. jazz/lofi hip hop radioğŸŒ±chill beats to relax/study to [LIVE 24/7]\n"
    printf "2. Lofi Playlist for Programming / Relax / Chill\n"
    printf "3. 2-HOUR STUDY WITH MEğŸŒ¦ï¸ / calm piano / A Rainy Day in Shibuya, Tokyo / with countdown+alarm\n"
    printf "4. Lofi Girl\n"
    printf "5. Chillhop\n"
    printf "6. Box Lofi\n"
    printf "7. SmoothChill"
}

main() {
    choice=$(menu | $rofi_command | cut -d. -f1)

    case $choice in
    1)
        notification "jazz/lofi hip hop radioğŸŒ±chill beats to relax/study to [LIVE 24/7] â˜•ï¸ğŸ¶"
        URL="https://www.youtube.com/watch?v=8JvvKMwPa_Y"
        EXTRA_ARGS="--no-video"
        break
        ;;
    2)
        notification "Lofi Playlist for Programming / Relax / Chill â˜•ï¸ğŸ¶"
        URL="https://www.youtube.com/watch?v=v9XyIGXcRck"
        EXTRA_ARGS="--no-video"
        break
        ;;
    3)
        notification "2-HOUR STUDY WITH MEğŸŒ¦ï¸ / calm piano / A Rainy Day in Shibuya, Tokyo / with countdown+alarm â˜•ï¸ğŸ¶"
        URL="https://www.youtube.com/watch?v=5Q2Pc-e-8Qc"
        EXTRA_ARGS="--no-video"
        break
        ;;
    4)
        notification "Lofi Girl â˜•ï¸ğŸ¶"
        URL="https://play.streamafrica.net/lofiradio"
        break
        ;;
    5)
        notification "Chillhop â˜•ï¸ğŸ¶"
        URL="http://stream.zeno.fm/fyn8eh3h5f8uv"
        break
        ;;
    6)
        notification "Box Lofi â˜•ï¸ğŸ¶"
        URL="http://stream.zeno.fm/f3wvbbqmdg8uv"
        break
        ;;
    7)
        notification "SmoothChill â˜•ï¸ğŸ¶"
        URL="https://media-ssl.musicradio.com/SmoothChill"
        break
        ;;
    esac

    # run mpv with args and selected url
    # added title arg to make sure the pkill command kills only this instance of mpv
    mpv $ARGS --title="radio-mpv" $URL $EXTRA_ARGS
}

pkill -f radio-mpv || main
