#!/bin/bash

sleep_icon="/usr/share/icons/Papirus-Dark/48x48/status/state_shutoff.svg"

notify-send -i $sleep_icon 'Swayidle' '\nSleep in 5s';

swayidle -w timeout 3 'playerctl pause && pkill -f radio-mpv && pkill -f telegram-deskto'\
  timeout 5 'hyprctl dispatch dpms off' \
  resume 'hyprctl dispatch dpms on && pkill swayidle && $HOME/.config/hypr/scripts/autosleep.sh' \
  after-resume 'waybar' \
  before-sleep 'pkill waybar' &
